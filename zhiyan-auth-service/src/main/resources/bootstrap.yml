# bootstrap.yaml - 应用启动核心配置（优先加载）
spring:
  # 1. 应用基础信息（与业务配置保持一致，用于 Nacos 配置标识）
  application:
    name: zhiyan-auth-service  # 应用名，需与 Nacos 配置的 data-id 前缀匹配

  # 2. 配置中心核心配置（Nacos 连接信息，启动必需）
  cloud:
    nacos:
      # Nacos 配置中心配置（优先初始化，用于拉取后续配置）
      config:
        server-addr: 127.0.0.1:8848  # Nacos 地址（固定，无敏感信息）
        namespace: zhiyan-dev        # 环境隔离命名空间（与业务配置一致）
        group: DEFAULT_GROUP         # 配置分组（与业务配置一致）
        file-extension: yaml         # 配置文件格式（yaml）
        # 可选：配置中心用户名密码（若 Nacos 开启认证，需从环境变量注入）
        # username: ${NACOS_USERNAME:}
        # password: ${NACOS_PASSWORD:}

      # Nacos 服务发现配置（启动阶段可选，但建议提前配置）
      discovery:
        server-addr: ${spring.cloud.nacos.config.server-addr}  # 复用配置中心地址
        namespace: ${spring.cloud.nacos.config.namespace}      # 复用命名空间
        group: ${spring.cloud.nacos.config.group}              # 复用分组

  # 3. 配置导入规则（简化配置中心引入，Spring Boot 2.4+ 推荐）
  config:
    import:
      - nacos:${spring.application.name}.yaml?refresh=true  # 导入 Nacos 中当前应用的核心配置
      # 可选：导入公共配置（如全局日志、通用常量，需在 Nacos 提前创建）
      # - nacos:zhiyan-common.yaml?group=DEFAULT_GROUP&refresh=true

# 5. 日志基础配置（启动阶段日志，避免日志配置加载延迟）
logging:
  level:
    root: INFO
    org.springframework.cloud: INFO  # 配置中心相关日志级别
    com.alibaba.nacos: INFO          # Nacos 客户端日志级别
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [BOOTSTRAP] %-5level %logger{36} - %msg%n"  # 标记启动阶段日志